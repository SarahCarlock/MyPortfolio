(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[320],{LuU8:function(t,e,c){"use strict";c.d(e,"b",(function(){return pathRedirect})),c.d(e,"a",(function(){return fetchInitialPathContent}));var n=c("rePB"),o=c("GR0a"),u=c("lkI2"),a=c("e18T"),r=c("1xSP"),i=c("p7af"),d=c("kg3G"),j=c("y/Yg"),l=c("ePBi"),s=c("ukIe"),b=c("aD9D"),O=c("j2Qm"),m=c("nAFK"),g=c("mpkx"),p=c("FLWv"),S=c("mUlu"),y=c("p+FQ"),h=c("VogR"),f=c("fDCE"),I=c("Rab/"),_=c("eW39"),k=c("c8W1");function ownKeys(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(c),!0).forEach((function(e){Object(n.a)(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}const createNavigationPayload=({journey:t,path:e,track:c,module:n,contentItem:o})=>({journeySlug:t?t.slug:void 0,pathSlug:e.slug,trackSlug:c.slug,moduleSlug:n.slug,contentItemType:r.c[o.type].pluralType,contentItemSlug:o.slug}),journeyNavigate=({journey:t,path:e,track:c,module:n,contentItem:u},r=!0)=>async(i,d)=>{const j=d(),l=Object(I.m)(j),s=createNavigationPayload({journey:t,path:e,track:c,module:n,contentItem:u});let b=a.h(_objectSpread(_objectSpread({},s),{},{query:l}));r&&(b=Object(o.redirect)(b)),i(b)},pathNavigate=({path:t,track:e,module:c,contentItem:n},u=!0)=>async(r,i)=>{const d=i(),j=Object(I.m)(d),l=createNavigationPayload({path:t,track:e,module:c,contentItem:n});let s=a.m(_objectSpread(_objectSpread({},l),{},{query:j}));u&&(s=Object(o.redirect)(s)),r(s)},pathResume=()=>async(t,e)=>{const c=e(),n=Object(I.j)(c),o=Object(y.d)(c,n.pathSlug),u=Object(j.b)(c,o.id),a=Object(l.e)(e(),u.contentItemIds)||u.contentItemIds[u.contentItemIds.length-1];await t(Object(s.b)({ids:[a],minimal:!1}));const r=Object(d.b)(e(),{id:a}),i=u.modules.find((t=>t.content_item_ids.indexOf(r.id)>-1)),b=u.tracks.find((t=>t.module_ids.indexOf(i.id)>-1));if(n.journeySlug){const e=Object(m.d)(c,n.journeySlug);t(journeyNavigate({journey:e,path:o,track:b,module:i,contentItem:r}))}else t(pathNavigate({path:o,track:b,module:i,contentItem:r}))},pathTrackResume=()=>async(t,e)=>{const c=e(),n=Object(I.j)(c),o=Object(y.d)(c,n.pathSlug),u=Object(f.e)(c,n.trackSlug);if(!u)return void t(pathResume());const a=Object(j.c)(c,u.id),r=Object(l.e)(e(),a.contentItemIds)||a.contentItemIds[a.contentItemIds.length-1];await t(Object(s.b)({ids:[r],minimal:!1}));const i=Object(d.b)(e(),{id:r}),b=a.modules.find((t=>t.content_item_ids.indexOf(i.id)>-1));if(n.journeySlug){const e=Object(m.d)(c,n.journeySlug);t(journeyNavigate({journey:e,path:o,track:u,module:b,contentItem:i}))}else t(pathNavigate({path:o,track:u,module:b,contentItem:i}))},pathRedirect=()=>async(t,e)=>{const c=e(),n=Object(I.j)(c);let o;if(n.journeySlug&&await t(Object(O.b)(n.journeySlug)),n.pathSlug){Object(y.d)(c,n.pathSlug)||await t(Object(S.d)(n.pathSlug));const u=Object(y.d)(e(),n.pathSlug);await t(Object(h.g)(u.track_ids)),o=Object(f.i)(e(),u.track_ids)}else{const c=Object(m.d)(e(),n.journeySlug);c||t(Object(_.a)());const u=(null==c?void 0:c.paths.reduce(((t,e)=>t.concat(e.track_ids)),[]))||[];await t(Object(h.g)(u)),o=Object(f.i)(e(),u)}const u=o.reduce(((t,e)=>t.concat(e.module_ids)),[]);await t(Object(g.f)(u));const a=Object(p.g)(e(),u).reduce(((t,e)=>t.concat(e.content_item_ids)),[]);await Promise.all([t(Object(i.c)(a)),t(Object(s.b)({ids:a,minimal:!1}))]),n.pathSlug?n.trackSlug?n.moduleSlug?t((async(t,e)=>{const c=e(),n=Object(I.j)(c),o=Object(y.d)(c,n.pathSlug),u=Object(f.e)(c,n.trackSlug);if(!u)return void t(pathResume());const a=Object(p.d)(c,n.moduleSlug);if(!a)return void t(pathTrackResume());const r=a.content_item_ids,i=Object(l.e)(e(),r)||r[r.length-1];await t(Object(s.b)({ids:[i],minimal:!1}));const j=Object(d.b)(e(),{id:i});if(n.journeySlug){const e=Object(m.d)(c,n.journeySlug);t(journeyNavigate({journey:e,path:o,track:u,module:a,contentItem:j}))}else t(pathNavigate({path:o,track:u,module:a,contentItem:j}))})):t(pathTrackResume()):t(pathResume()):t((async(t,e)=>{const c=e(),n=Object(I.j)(c),o=Object(m.d)(c,n.journeySlug),u=Object(j.a)(c,o.id),a=Object(l.e)(e(),u.contentItemIds)||u.contentItemIds[u.contentItemIds.length-1];await t(Object(s.b)({ids:[a],minimal:!1}));const r=Object(d.b)(e(),{id:a}),i=u.modules.find((t=>t.content_item_ids.indexOf(r.id)>-1)),b=u.tracks.find((t=>t.module_ids.indexOf(i.id)>-1)),O=u.paths.find((t=>t.track_ids.indexOf(b.id)>-1));t(journeyNavigate({journey:o,path:O,track:b,module:i,contentItem:r}))}))},fetchInitialPathContent=()=>async(t,e)=>{const c=Object(I.j)(e()),n=[];if(c.journeySlug&&!Object(m.d)(e(),c.journeySlug)&&n.push(t(Object(O.b)(c.journeySlug))),Object(y.d)(e(),c.pathSlug)||n.push(t(Object(S.d)(c.pathSlug))),await Promise.all(n),await t(Object(k.a)()),!Object(b.c)(e(),c.contentItemSlug)){const n=Object(I.m)(e()),r=c.pathSlug,i=c.trackSlug,d=c.moduleSlug;Object(u.a)("info",`Content Item: ${c.contentItemSlug} doesn't exist in this track; Redirecting`),t(Object(o.redirect)(a.o(_objectSpread(_objectSpread({},{pathSlug:r,trackSlug:i,moduleSlug:d}),{},{query:n}))))}}}}]);
//# sourceMappingURL=320.bcf94530eb2e55b1cb34.chunk.js.map