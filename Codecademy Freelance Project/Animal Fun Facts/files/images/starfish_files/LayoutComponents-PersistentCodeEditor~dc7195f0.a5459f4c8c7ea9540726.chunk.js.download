(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[336],{"8nqx":function(e,t,o){"use strict";o.r(t),o.d(t,"PersistentCodeEditorWrapper",(function(){return PersistentCodeEditorWrapper}));var n=o("ODXe"),r=o("sEfC"),c=o.n(r),s=o("yrBZ"),i=o("QqFe"),l=o("ZK4f"),a=o("q1tI"),b=o("/MKj"),j=o("dIjy"),O=o("z9KF"),u=o("c2gB"),d=o("QtoC"),p=o("GwnQ"),f=o("vfkt"),w=o("akuy"),h=o("bCom"),y=o("Z9Sh"),x=o("rL5b"),_=o("rePB"),g=o("b+vN"),m=o("4Te6");const v=o("swBZ").components.code_editor,S={title:v.reset_workspace_confirmation_title,subtitle:v.reset_workspace_confirmation_content};var F=o("nKUr");function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}const AuthorModal=({fileName:e,closeModal:t})=>{const o=Object(u.c)(),n=o.updateFiles,r=o.openFile;return Object(F.jsx)(g.a,function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){Object(_.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({isOpen:!0,cancel:t,action:()=>{const o=new m.a({path:e,content:""});n([o]),r(e),t()}},(e=>({actionText:"Add File",title:`${e} does not exist`,subtitle:`${e} was set as a default file in Author but does not exist in the workspace yet.`}))(e)))};function LearnerModal_ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function LearnerModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?LearnerModal_ownKeys(Object(o),!0).forEach((function(t){Object(_.a)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):LearnerModal_ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const LearnerModal=({fileName:e,closeModal:t})=>{const o=Object(a.useState)(!1),r=Object(n.a)(o,2),c=r[0],s=r[1],i=Object(u.c)().restoreInitialSavepoint,cancelAndClose=()=>{t(),s(!1)};return c?Object(F.jsx)(g.a,LearnerModal_objectSpread({isOpen:!0,cancel:cancelAndClose,action:()=>{cancelAndClose(),i()}},S)):Object(F.jsx)(g.a,LearnerModal_objectSpread({isOpen:!0,cancel:cancelAndClose,action:()=>s(!0)},(e=>({actionText:"Reset Files",cancelText:"Ok",title:"Whoa there!",subtitle:`${e} has been moved. This will cause problems with this exercise, please move ${e} back to its original location, or reset your files.`}))(e)))},MissingFileModal=({defaultFiles:e})=>{const t=Object(b.useSelector)(d.b),o=Object(a.useState)(!1),r=Object(n.a)(o,2),c=r[0],s=r[1],i=Object(u.c)(),l=i.fileIndex,j=i.submitting;if(c||!l||!j)return null;const O=j.isSubmitting&&j.action===p.c.Reset,f=Object.fromEntries(Object.entries(l).filter((([,e])=>"file"===e))),w=e.find((e=>!f[e]));return O||!w?null:t?Object(F.jsx)(AuthorModal,{fileName:w,closeModal:()=>s(!0)}):Object(F.jsx)(LearnerModal,{fileName:w,closeModal:()=>s(!0)})};var P="loader__DHHU7_47_1HFEDqxPP5ce",D="codeEditor__YzZnqkLi3VyOw9y-w8ZCc",k=o("ytuh");const PersistentCodeEditorWrapper=({config:e,shouldShowCheckWorkButton:t=!1,toggleFullScreen:o})=>{const r=Object(u.c)(),_=r.files,g=r.currentFile,m=r.ready,v=r.openFile,S=r.openFiles,E=r.closeFile,L=r.requestFile,B=r.updateFile,C=r.fetchWorkspace,M=r.persistWorkspace,K=r.workspaceSlug,N=Object(b.useSelector)(d.b),A=g?null==_?void 0:_[g]:null,T=g&&Boolean(A),q=Object(a.useState)(!1),H=Object(n.a)(q,2),R=H[0],Z=H[1],G=e.no_run_button;Object(a.useEffect)((()=>{R&&C()}),[R,C]),Object(a.useEffect)((()=>{m&&g&&!T&&L(g)}),[g,T,m,L,K]);const W=Object(a.useMemo)((()=>c()(M,2e3)),[M]),I=Object(a.useCallback)((e=>{B(e),W()}),[W,B]),U=Object(y.b)(),$=Object(a.useState)(),z=Object(n.a)($,2),Q=z[0],V=z[1],X=Object(a.useCallback)((()=>{Z(!R)}),[Z,R]),Y=Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(x.a,{}),Object(F.jsx)("div",{className:P,children:Object(F.jsx)(O.a,{})})]});if(!m)return Y;const J=Object(F.jsxs)(s.b,{center:!0,column:!0,flexGrow:1,"data-testid":"code-editor-placeholder",children:[Object(F.jsx)(l.a,{size:48}),Object(F.jsx)("div",{style:{marginTop:15},children:"Code Editor"}),!R&&Object(F.jsx)(i.d,{mt:24,onClick:()=>Z(!0),variant:"secondary",children:"Open file"})]}),ee=S.length?Y:J,te=e.navigator_disabled&&!N,oe=Boolean(!t&&g),ne=!te&&R;return Object(F.jsxs)(s.b,{flexDirection:"row",flexGrow:1,maxHeight:"100%",translate:"no","data-testid":"persistent-code-editor-wrapper",children:[ne&&Object(F.jsx)(j.a,{open:!0,toggleLayout:X,controls:N&&Object(F.jsx)(w.a,{justTheSavepoints:!0})}),e.files&&Object(F.jsx)(MissingFileModal,{defaultFiles:e.files}),Object(F.jsxs)(s.b,{flexBasis:"0%",flexDirection:"column",flexGrow:1,overflow:"hidden",children:[Object(F.jsx)(k.a,{toggleFullScreen:o,canCloseFiles:!te,canEditFiles:!te,currentFileName:g,openFiles:S,onOpenFile:v,onCloseFile:E,navOpen:R,onToggleNav:X}),Object(F.jsx)(s.b,{column:!0,flexGrow:1,children:T&&g?Object(F.jsx)(f.a,{className:D,file:_[g],onEditorLoad:V,updateFile:G?I:B},g):ee}),Object(F.jsx)(h.a,{submitMode:p.d.RunAndTest,editor:Q,showRunButton:oe,showReviewButton:U===y.a.Review,showSolutionButton:U===y.a.Solution,showPrettifyButton:!0})]})]})};t.default=PersistentCodeEditorWrapper}}]);
//# sourceMappingURL=LayoutComponents-PersistentCodeEditor~dc7195f0.a5459f4c8c7ea9540726.chunk.js.map