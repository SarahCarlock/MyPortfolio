(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[376],{mf31:function(e,r,o){"use strict";o.r(r),o.d(r,"WebBrowserContainer",(function(){return WebBrowserContainer}));var t=o("q1tI"),s=o.n(t),n=o("/MKj"),a=o("tLXD"),c=o("z9go"),l=o("jY6L"),i=o("VmES"),b=o("yxtj"),u=o("c2gB"),d=o("DZdY"),j=o("yrBZ"),w=o("QqFe"),h=o("hsiM"),g=o("9GW+"),B=o("7mab"),m=o("1Wj3"),f=o("qwNl"),O=o("630U"),p=o("gtj7"),x=o("TSYQ"),C=o.n(x),_="placeholder__8mNBfAlSiCVh2USmiLL4l",y="themeDark__2BBvVKJdrHT-tNocSb689Q",L="componentName__S_6ngicCE_rG7GjmVqmgL",v=o("nKUr");const S=Object(d.a)(w.d,{target:"e1osgqh80",label:"StyledButton"})(Object(O.i)({color:"green",borderColor:"green",minWidth:"8rem",marginTop:"1.25rem"}),""),PlaceHolder=({action:e,actionButtonEnabled:r,actionCallBack:o,componentName:t,theme:s="light",icon:n})=>{const a=C()({[_]:!0,[y]:"dark"===s});return Object(v.jsxs)(j.b,{flexGrow:1,flexShrink:0,center:!0,column:!0,className:a,children:[n&&Object(v.jsx)(n,{size:24}),Object(v.jsx)("div",{className:L,children:t}),o?Object(v.jsx)(S,{disabled:!r,onClick:o,children:e}):null]})};var k=o("KKCq"),R=o("S6PG"),U=o("2oex"),E=o("GwnQ"),M=o("bCom"),D=o("Z9Sh");const BrowserFooter=()=>{const e=Object(n.useSelector)(U.C),r=Object(D.b)()===D.a.Solution;return e&&["jupyter","python-3_8-increased-memory"].includes(e)?Object(v.jsx)(M.a,{submitMode:E.d.TestOnly,showRunButton:!0,showCopyButton:!1,showSolutionButton:r}):null};var W=o("rePB"),K="frame__3MwfnSGoAwAWC0BSuKyiV-";class RemoteWebBrowser_RemoteWebBrowser extends t.Component{constructor(...e){super(...e),Object(W.a)(this,"iframeRef",s.a.createRef()),Object(W.a)(this,"handleSendIframeMessage",(e=>{this.getIframe().contentWindow.postMessage(e,"*")})),Object(W.a)(this,"getIframe",(()=>this.iframeRef.current)),Object(W.a)(this,"onBrowserMessage",(e=>{this.props.onBrowserMessage(e)}))}componentDidMount(){const e=this.props.bindBrowserListener;window.addEventListener("message",this.onBrowserMessage,!1),this.removeMessageListener=e(this.handleSendIframeMessage)}componentWillUnmount(){window.removeEventListener("message",this.onBrowserMessage),this.removeMessageListener()}render(){const e=this.props,r=e.refreshCount,o=e.src,t=e.onBrowserLoad,s=e.onBrowserError;return Object(v.jsx)("iframe",{title:"Codecademy Web Browser",ref:this.iframeRef,onLoad:t,onError:s,allowFullScreen:!0,className:K,allow:"geolocation; microphone; camera",src:o},r)}}const N=Object(d.a)("input",{target:"e1a735o50",label:"URLInput"})("background-color:transparent;color:",Object(O.B)("colors.text"),";padding-left:",Object(O.B)("spacing.12"),";flex:1;height:40px;font-size:",Object(O.B)("fontSize.14"),";white-space:nowrap;line-height:40px;border:1px solid ",Object(O.B)("colors.background"),";position:relative;&:focus{outline:0;}"),ThemedWebBrowser=e=>{const r=e.urlBarRef,o=e.browserRef,s=e.bindBrowserListener,a=e.onUrlBarKeyDown,i=e.onUrlBarChange,b=e.onBack,u=e.onRefresh,d=e.onBrowserLoad,O=e.onBrowserError,x=e.onBrowserMessage,C=e.showBrowserBar,_=void 0===C||C,y=e.showPreviewButton,L=e.isBlank,S=e.isReady,U=e.isLoading,E=e.src,M=e.refreshCount,D=e.displayUrl,W=void 0===D?"":D,K=e.toggleFullScreen,G=Object(n.useSelector)(l.c),z=Object(t.useCallback)((()=>{Object(c.c)({target:"preview_browser",page_name:G})}),[G]);if(!S)return Object(v.jsx)(j.b,{height:"100%",bg:"gray-900",alignItems:"center",justifyContent:"center",children:Object(v.jsx)(R.a,{})});let A;A=L?Object(v.jsx)(PlaceHolder,{theme:"dark",componentName:"Web Browser",icon:h.a}):Object(v.jsx)(RemoteWebBrowser_RemoteWebBrowser,{src:E,onBrowserLoad:d,onBrowserMessage:x,onBrowserError:O,bindBrowserListener:s,refreshCount:M,ref:o});const I=Object(v.jsxs)(j.b,{bg:"shadow-solid",height:"3rem",alignItems:"center",children:[Object(v.jsx)(w.c,{"aria-label":"Previous Browser Page",mx:8,icon:g.a,size:"small",onClick:b}),Object(v.jsx)(w.c,{"aria-label":"Refresh Browser Page",mx:8,icon:B.a,size:"small",onClick:u}),Object(v.jsxs)(j.b,{alignItems:"center",justifyContent:"center",flexGrow:1,pr:12,children:[Object(v.jsx)(N,{"aria-label":"URL input",type:"text",value:W,ref:r,placeholder:"Type URL here",onKeyDown:a,onChange:i}),U&&Object(v.jsx)(k.a,{})]}),K&&Object(v.jsx)(w.c,{"aria-label":"Toggle fullscreen",icon:m.a,mx:8,onClick:K,size:"small"}),y&&Object(v.jsx)(w.c,{"aria-label":"Open in new tab",mx:8,icon:f.a,onClick:z,size:"small",target:"_blank",href:Object(p.a)(window.location.href,{preview:!0})})]});return Object(v.jsxs)(j.b,{flexGrow:1,flexDirection:"column",borderWidthLeft:1,borderLeft:"solid",borderColor:"navy-600",children:[_&&I,Object(v.jsx)(j.b,{flexGrow:1,bg:"white",flexDirection:"column",children:A}),Object(v.jsx)(BrowserFooter,{})]})},WebBrowserContainer=({onLoad:e=(()=>{}),config:{display_url:r,hide_browser_bar:o,show_preview_button:s}={display_url:i.a},toggleFullScreen:d})=>{const j=Object(u.c)(),w=j.ready,h=j.host,g=j.createBrowser,B=j.browser,m=void 0===B?{}:B,f=j.changeCounter,O=j.refreshBrowser,p=j.setBrowserUrlBar,x=j.pushBrowserLocation,C=j.navigateBrowserBack,_=j.loadBrowserSuccess,y=j.initializeBrowser,L=j.respondToBrowserMessage,S=m.init,k=m.loading,R=m.refreshCount,U=m.location,E=void 0===U?{}:U,M=m.urlBarValue,D=m.hosts,W=(void 0===D?{}:D).internalUrl,K=E.displayUrl,N=E.internalUrl,G=Object(t.useRef)(null),z=Object(t.useRef)(null),A=Object(t.useRef)(),I=A.current,T=null==m?void 0:m.message,P=Object(a.a)(T),q=Object(n.useSelector)(l.c),trackBrowserClick=e=>{Object(c.c)({target:e,page_name:q})},V=P===T&&T,F=Object(t.useMemo)((()=>!new RegExp(W,"g").test(N)),[W,N]),Q=Object(t.useMemo)((()=>N),[R,f]),H=Object(t.useCallback)((e=>p(e.target.value)),[p]),Y=Object(t.useCallback)((e=>{13===e.keyCode&&x({url:M,urlType:"displayUrl"})}),[M,x]),Z=Object(t.useCallback)((()=>{e(),_()}),[_,e]),J=Object(t.useCallback)((e=>{const r=e.data,o=e.origin;if(W.includes(o))return T&&Object(b.d)(r)?L(T,r):r.location?x({url:r.location,urlType:"internalUrl"}):void 0}),[W,T,L,x]),X=Object(t.useCallback)((e=>(A.current=e,()=>A.current=void 0)),[A]);return Object(t.useEffect)((()=>{g()}),[g]),Object(t.useEffect)((()=>{w&&h&&m&&!W&&y({hosts:{internalUrl:h},location:{displayUrl:r}})}),[w,h,r,m,W,y]),Object(t.useEffect)((()=>{h&&y({hosts:{internalUrl:h},location:{displayUrl:r}})}),[r,h,y]),Object(t.useEffect)((()=>{S&&O()}),[f,S,O]),Object(t.useEffect)((()=>{I&&V&&!k&&!F&&I(T.data)}),[V,I,k,F,T]),Object(v.jsx)(ThemedWebBrowser,{urlBarRef:G,browserRef:z,bindBrowserListener:X,onUrlBarKeyDown:Y,onUrlBarChange:H,onBack:()=>{trackBrowserClick("back_button_output"),C()},onRefresh:()=>{trackBrowserClick("refresh_output"),O()},onBrowserLoad:Z,onBrowserError:()=>{},onBrowserMessage:J,isBlank:!K||!N,isReady:w,isLoading:k,src:Q,showBrowserBar:!o,showPreviewButton:!!s,displayUrl:M,refreshCount:R,toggleFullScreen:d})};r.default=WebBrowserContainer}}]);
//# sourceMappingURL=platform-components-WebBrowser-WebBrowserContainer~c266ff1b.b781b7c5b68c469a9b03.chunk.js.map